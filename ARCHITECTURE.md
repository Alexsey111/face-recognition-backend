# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Face Recognition Service

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
face-recognition-service/
‚îú‚îÄ‚îÄ app/                    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ middleware/        # Middleware –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ routes/           # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ services/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ models/           # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ db/               # Database —Å–ª–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ tasks/            # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
‚îú‚îÄ‚îÄ tests/                # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ unit/            # –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ integration/     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ *.py             # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ alembic/             # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ requirements-dev.txt # Dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile          # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml  # Docker Compose
‚îú‚îÄ‚îÄ pyproject.toml     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ Makefile           # –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –±–ª–æ–∫–∏

### 1. **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (app/)**

#### **1.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–§—É–Ω–∫—Ü–∏–∏**: 
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Redis
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MinIO
  - CORS –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ü–æ–∫—Ä—ã—Ç–æ —é–Ω–∏—Ç —Ç–µ—Å—Ç–∞–º–∏ (test_config.py)

#### **1.2 –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (main.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ middleware
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ lifespan
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 2. **Middleware —Å–ª–æ–π (middleware/)**

#### **2.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (auth.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (test_auth.py)

#### **2.2 CORS (cors.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–æ–≤
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ preflight –∑–∞–ø—Ä–æ—Å–æ–≤
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_cors_middleware.py)

#### **2.3 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (error_handler.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
  - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **2.4 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (logging.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–§—É–Ω–∫—Ü–∏–∏**:
  - Request/Response –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
  - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **2.5 Rate Limiting (rate_limit.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ IP
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

### 3. **API Routes (routes/)**

#### **3.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (auth.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å–µ—Å—Å–∏—è–º–∏
- **Endpoints**:
  - `POST /auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
  - `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - `POST /auth/logout` - –í—ã—Ö–æ–¥
  - `POST /auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
  - `GET /auth/me` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
  - `GET /auth/verify` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
  - `POST /auth/change-password` - –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (test_auth.py - 27 —Ç–µ—Å—Ç–æ–≤)

#### **3.2 –ó–∞–≥—Ä—É–∑–∫–∞ (upload.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- **Endpoints**:
  - `POST /upload` - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - `GET /upload/status/{id}` - –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã (test_upload.py)

#### **3.3 –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (verify.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏ –ø–æ —Ñ–æ—Ç–æ
- **Endpoints**:
  - `POST /verify` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–∏—Ü
  - `GET /verify/status/{id}` - –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### **3.4 Liveness (liveness.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∂–∏–≤–æ—Å—Ç–∏ (–∞–Ω—Ç–∏-—Å–ø—É—Ñ–∏–Ω–≥)
- **Endpoints**:
  - `POST /liveness` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∂–∏–≤–æ—Å—Ç–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### **3.5 –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (reference.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- **Endpoints**:
  - `POST /reference` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞
  - `GET /reference` - –°–ø–∏—Å–æ–∫ —ç—Ç–∞–ª–æ–Ω–æ–≤
  - `PUT /reference/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞
  - `DELETE /reference/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_reference_routes.py)

#### **3.6 –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (admin.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **Endpoints**:
  - `GET /admin/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - `GET /admin/users` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **3.7 –ó–¥–æ—Ä–æ–≤—å–µ (health.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
- **Endpoints**:
  - `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
  - `GET /ready` - Readiness probe
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã (test_health.py)

### 4. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (services/)**

#### **4.1 ML Service (ml_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥–µ–ª—è–º–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–∏—Ü
  - –î–µ—Ç–µ–∫—Ü–∏—è liveness
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_ml_service.py)

#### **4.2 Database Service (database_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **–§—É–Ω–∫—Ü–∏–∏**:
  - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
  - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - –ú–∏–≥—Ä–∞—Ü–∏–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_database.py, test_db_sync.py)

#### **4.3 Auth Service (auth_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### **4.4 Storage Service (storage_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º (MinIO)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
  - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_storage.py)

#### **4.5 Encryption Service (encryption_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
  - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_encryption.py)

#### **4.6 Validation Service (validation_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_validation_service.py)

#### **4.7 Cache Service (cache_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **4.8 Session Service (session_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–µ—Å—Å–∏—è–º–∏
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **4.9 Webhook Service (webhook_service.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –û—Ç–ø—Ä–∞–≤–∫–∞ webhook'–æ–≤
  - Retry –º–µ—Ö–∞–Ω–∏–∑–º
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_webhook_service.py)

### 5. **–ú–æ–¥–µ–ª–∏ (models/)**

#### **5.1 User Models (user.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: User, UserCreate, UserUpdate, UserResponse
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_models.py)

#### **5.2 Request Models (request.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–¥–µ–ª–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: AuthRequest, UploadRequest, VerifyRequest –∏ –¥—Ä.
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **5.3 Response Models (response.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–¥–µ–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤ API
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: SuccessResponse, ErrorResponse, APIResponse
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **5.4 Reference Models (reference.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–¥–µ–ª–∏ —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: ReferenceCreate, ReferenceUpdate, ReferenceResponse
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **5.5 Verification Models (verification.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–¥–µ–ª–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: VerificationRequest, VerificationResult
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

### 6. **Database —Å–ª–æ–π (db/)**

#### **6.1 Models (models.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: SQLAlchemy –º–æ–¥–µ–ª–∏ –¥–ª—è –ë–î
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: User, Reference, Verification, Session
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **6.2 Database (database.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –°–æ–∑–¥–∞–Ω–∏–µ engine
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
  - –ú–∏–≥—Ä–∞—Ü–∏–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **6.3 CRUD (crud.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
  - –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - –£–¥–∞–ª–µ–Ω–∏–µ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

### 7. **–£—Ç–∏–ª–∏—Ç—ã (utils/)**

#### **7.1 Constants (constants.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: –°—Ç–∞—Ç—É—Å—ã, –∫–æ–¥—ã –æ—à–∏–±–æ–∫, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **7.2 Validators (validators.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ email
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_validators.py)

#### **7.3 Security (security.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
  - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (test_security.py)

#### **7.4 File Utils (file_utils.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **7.5 Logger (logger.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–æ–≤
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
  - –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **7.6 Decorators (decorators.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –¢–∞–π–º–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

#### **7.7 Exceptions (exceptions.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: BusinessException, ValidationException, AuthException
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

### 8. **–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (tasks/)**

#### **8.1 Cleanup (cleanup.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫
  - –û—á–∏—Å—Ç–∫–∞ —Å–µ—Å—Å–∏–π
  - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã (test_cleanup.py)

#### **8.2 Scheduler (scheduler.py)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

### **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
- **–Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã**: ‚úÖ –ü–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: ‚úÖ –ü–æ–∫—Ä—ã–≤–∞—é—Ç API endpoints
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã**: ‚úÖ –ü–æ–∫—Ä—ã–≤–∞—é—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

### **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –º–æ–¥—É–ª—è–º**

| –ú–æ–¥—É–ª—å | –Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ | –°—Ç–∞—Ç—É—Å |
|--------|------------|----------------|----------------|---------|
| Config | ‚úÖ test_config.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Auth | ‚úÖ test_auth.py (27 —Ç–µ—Å—Ç–æ–≤) | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Middleware | ‚úÖ test_cors_middleware.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Routes | ‚úÖ test_reference_routes.py | ‚úÖ test_api_endpoints.py | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Services | ‚úÖ test_services.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| ML Service | ‚úÖ test_ml_service.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Database | ‚úÖ test_database.py, test_db_sync.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Storage | ‚úÖ test_storage.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Encryption | ‚úÖ test_encryption.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Validation | ‚úÖ test_validation_service.py, test_validators.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Utils | ‚úÖ test_utils.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Webhook | ‚úÖ test_webhook_service.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Models | ‚úÖ test_models.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Health | ‚úÖ test_health.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |
| Cleanup | ‚úÖ test_cleanup.py | ‚úÖ | ‚úÖ | **–ü–û–õ–ù–û–ï** |

### **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏**
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–æ
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–æ
- **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–æ
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–∞–º–∏**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–æ
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–æ

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Framework**: FastAPI
- **Database**: PostgreSQL + SQLAlchemy
- **Cache**: Redis
- **Storage**: MinIO (S3-compatible)
- **ML**: OpenCV, face_recognition
- **Auth**: JWT tokens
- **API Documentation**: OpenAPI/Swagger
- **Testing**: pytest, coverage
- **Containerization**: Docker, Docker Compose
- **CI/CD**: GitHub Actions compatible

## üìà –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**: ~90%+
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: Clean Architecture
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: OpenAPI + README
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: JWT, CORS, Rate Limiting
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Health checks, logging
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: Stateless design, Redis cache